<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>Accueil admin</title>
</h:head>
<h:body>

	<p:layout style="min-width:400px;min-height:200px;height: 730px">
		<p:layoutUnit position="west" resizable="false" size="200">

			<h:form>
				<h:commandButton value="Ajouter un produit" action="ajoutProduit" />
				<h:commandButton value="Supprimer un produit" action="supprProduit" />
				<h:commandButton value="Modifier un produit" action="modifProduit" />
			</h:form>

			<br />

			<h:form>
				<h:commandButton value="Ajouter une catégorie"
					action="ajoutCategorie" />
				<h:commandButton value="Supprimer une catégorie"
					action="supprCategorie" />
				<h:commandButton value="Modifier une catégorie"
					action="modifCategorie" />
			</h:form>

		</p:layoutUnit>

		<p:layoutUnit position="center">

			<h2 style="color: red; text-align: center">Liste des catégories</h2>

			<h:form>
				<p:dataTable var="cat" value="#{sessionScope.listeCatSession}"
					id="idTab1">
					<p:column headerText="ID">
						<h:outputText value="#{cat.idCategorie}" />
					</p:column>

					<p:column headerText="Nom catégorie">
						<h:outputText value="#{cat.nomCategorie}" />
					</p:column>

					<p:column headerText="Description">
						<h:outputText value="#{cat.description}" />
					</p:column>

					<p:column headerText="Photo">
						<h:graphicImage value="#{cat.img}" />
					</p:column>

					<p:column headerText="Opérations">
						<p:commandLink value="Supprimer"
							action="#{catMB.supprimerCategorie}"
							styleClass="ui-priority-primary" update="idTab1">
							<f:setPropertyActionListener value="#{cat.idCategorie}"
								target="#{catMB.cat.idCategorie}"></f:setPropertyActionListener>
						</p:commandLink>
          | 
          <p:commandLink value="Modifier" action="modifCategorie">
							<f:setPropertyActionListener value="#{cat}" target="#{catMB.cat}"></f:setPropertyActionListener>
						</p:commandLink>
					</p:column>

				</p:dataTable>
			</h:form>

			<h2 style="color: red; text-align: center">Liste des produits</h2>

			<h:form>
				<p:dataTable var="prod" value="#{sessionScope.listeProdSession}"
					id="idTab2">
					<p:column headerText="ID produit">
						<h:outputText value="#{prod.idProduit}" />
					</p:column>

					<p:column headerText="Désignation">
						<h:outputText value="#{prod.designation}" />
					</p:column>

					<p:column headerText="Description">
						<h:outputText value="#{prod.description}" />
					</p:column>

					<p:column headerText="Prix">
						<h:outputText value="#{prod.prix}" />
					</p:column>

					<p:column headerText="Quantité">
						<h:outputText value="#{prod.quantite}" />
					</p:column>

					<p:column headerText="Photo">
						<h:outputText value="#{prod.photo}" />
					</p:column>

					<p:column headerText="Catégorie associée">
						<h:outputText value="#{prod.cat.idCategorie}" />
					</p:column>


					<p:column headerText="Opérations">
						<p:commandLink value="Supprimer" action="#{prodMB.deleteProduit}"
							styleClass="ui-priority-primary" update="idTab2">
							<f:setPropertyActionListener value="#{prod.idProduit}"
								target="#{prodMB.prod.idProduit}"></f:setPropertyActionListener>
						</p:commandLink>
          | 
          <p:commandLink value="Modifier" action="modifProduit">
							<f:setPropertyActionListener value="#{prod}"
								target="#{prodMB.prod}"></f:setPropertyActionListener>
						</p:commandLink>
					</p:column>

				</p:dataTable>
			</h:form>
		</p:layoutUnit>
	</p:layout>


</h:body>
</html>